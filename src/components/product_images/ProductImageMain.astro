---
const images = [
  '/src/assets/images/image-product-1.jpg',
  '/src/assets/images/image-product-2.jpg',
  '/src/assets/images/image-product-3.jpg',
  '/src/assets/images/image-product-4.jpg',
];

const { mainImageId, isOverlay, listItemClassNames } = Astro.props;
---

<style>
  .wrapper {
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;

    width: 100%;
    min-height: 445px;
  }

  .wrapper[data-is-overlay='false']:hover {
    cursor: pointer;
  }

  img {
    max-width: 100%;
    border-radius: 15pt;
  }

  .btn-move-main-img {
    position: absolute;
    display: flex;
    align-items: center;
    justify-content: center;

    width: 56px;
    height: 56px;

    border-radius: 50%;
    border: none;

    background-color: var(--clr-white);
  }

  .btn-move-main-img[data-active='false'] {
    display: none;
  }

  .btn-move-main-img:hover {
    cursor: pointer;
  }

  .btn-move-main-img:hover > svg {
    stroke: var(--clr-orange-500);
  }

  #btn-move-main-img-left {
    left: 0;
    transform: translateX(-50%);
  }

  #btn-move-main-img-right {
    right: 0;
    transform: translateX(50%);
  }

  svg {
    stroke: var(--clr-blue-900);

    transition: stroke 0.1s ease-out;
  }
</style>

<div
  class='wrapper'
  data-is-overlay={isOverlay.toString()}>
  <button
    class='btn-move-main-img'
    id={isOverlay ? 'btn-move-main-img-left' : ''}
    data-active={isOverlay.toString()}>
    <svg
      width='12'
      height='18'
      xmlns='http://www.w3.org/2000/svg'
      ><path
        d='M11 1 3 9l8 8'
        stroke='inherit'
        stroke-width='3'
        fill='none'
        fill-rule='evenodd'
      ></path></svg
    >
  </button>
  <img
    id={mainImageId}
    src={images[0]}
    alt=''
  />
  <button
    class='btn-move-main-img'
    id={isOverlay ? 'btn-move-main-img-right' : ''}
    data-active={isOverlay.toString()}>
    <svg
      width='13'
      height='18'
      xmlns='http://www.w3.org/2000/svg'
      ><path
        d='m2 1 8 8-8 8'
        stroke='inherit'
        stroke-width='3'
        fill='none'
        fill-rule='evenodd'
      ></path></svg
    >
  </button>
</div>

<script
  type='module'
  define:vars={{ isOverlay, mainImageId, listItemClassNames }}
>
  import {
    handleNextOnItemClick,
    handlePreviousOnItemClick,
  } from '/src/scripts/moveImages.js';

  const listItems = document.querySelectorAll(`.${listItemClassNames}`);
  const mainImage = document.getElementById(mainImageId);
  const rightBtn = document.getElementById('btn-move-main-img-right');
  const leftBtn = document.getElementById('btn-move-main-img-left');

  mainImage.addEventListener('click', () => {
    const overlay = document.getElementById('overlay-wrapper');
    overlay.setAttribute('data-active', 'true');
  });

  if (isOverlay) {
    rightBtn.addEventListener('click', () => {
      handleNextOnItemClick();
    });

    leftBtn.addEventListener('click', () => {
      handlePreviousOnItemClick();
    });
  }
</script>
